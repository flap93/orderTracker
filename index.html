
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Document</title>
        <script>
            const style = document.createElement("style");
            style.innerHTML = `
  body {
    font-family: Arial, sans-serif;
    max-width: 400px;
    margin: auto;
    padding: 20px;
    background-color: #f4f4f4;
  }
  h2, h3 {
    text-align: center;
  }
  form {
    background: white;
    padding: 15px;
    border-radius: 8px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
  }
  label {
    display: block;
    margin-bottom: 10px;
  }
  input {
    width: 100%;
    padding: 8px;
    margin-top: 5px;
    border: 1px solid #ccc;
    border-radius: 4px;
  }
  button {
    width: 100%;
    padding: 10px;
    background: #28a745;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    margin-top: 10px;
  }
  button:hover {
    background: #218838;
  }
  table {
    width: 100%;
    background: white;
    border-collapse: collapse;
    margin-top: 15px;
  }
  th, td {
    border: 1px solid #ddd;
    padding: 8px;
    text-align: center;
  }
  th {
    background: #007bff;
    color: white;
  }
  td button {
    background: #dc3545;
    border: none;
    padding: 5px;
    color: white;
    cursor: pointer;
    border-radius: 3px;
  }
  td button:hover {
    background: #c82333;
  }
`;
            document.head.appendChild(style);

            document.addEventListener("DOMContentLoaded", function () {
                const app = document.createElement("div");
                app.id = "app";
                document.body.appendChild(app);

                app.innerHTML = `
    <h2>Registro de Horas y Pedidos</h2>
    <form id="workForm">
      <label>Fecha: <input type="date" id="date"></label>
      <label>Horas trabajadas: <input type="number" id="hours" min="0" step="0.5"></label>
      <label>Pedidos realizados: <input type="number" id="orders" min="0"></label>
      <button type="submit">Guardar</button>
    </form>
    <h3>Historial</h3>
    <table>
      <thead>
        <tr><th>Fecha</th><th>Horas</th><th>Pedidos</th><th>Acciones</th></tr>
      </thead>
      <tbody id="history"></tbody>
    </table>
    <h3>Resumen Mensual</h3>
    <div id="monthlySummary"></div>
  `;

                const workForm = document.getElementById("workForm");
                const historyTable = document.getElementById("history");
                const monthlySummary = document.getElementById("monthlySummary");

                let workData = JSON.parse(localStorage.getItem("workData")) || [];

                function updateUI() {
                    historyTable.innerHTML = "";
                    const monthlyTotals = {};

                    workData.forEach((entry, index) => {
                        const month = entry.date.slice(0, 7);
                        if (!monthlyTotals[month]) {
                            monthlyTotals[month] = { hours: 0, orders: 0 };
                        }
                        monthlyTotals[month].hours += entry.hours;
                        monthlyTotals[month].orders += entry.orders;

                        const row = document.createElement("tr");
                        row.innerHTML = `
        <td>${entry.date}</td>
        <td>${entry.hours}</td>
        <td>${entry.orders}</td>
        <td>
          <button onclick="editEntry(${index})">Editar</button>
          <button onclick="deleteEntry(${index})">Eliminar</button>
        </td>
      `;
                        historyTable.appendChild(row);
                    });

                    monthlySummary.innerHTML = "";
                    for (const month in monthlyTotals) {
                        const monthDiv = document.createElement("div");
                        monthDiv.innerHTML = `<h4>${month}</h4><p>Total Horas: ${monthlyTotals[month].hours}</p><p>Total Pedidos: ${monthlyTotals[month].orders}</p>`;
                        monthlySummary.appendChild(monthDiv);
                    }
                }

                workForm.addEventListener("submit", (e) => {
                    e.preventDefault();
                    const date = document.getElementById("date").value;
                    const hours = parseFloat(document.getElementById("hours").value) || 0;
                    const orders = parseInt(document.getElementById("orders").value) || 0;

                    if (!date) return alert("Selecciona una fecha");

                    workData.push({ date, hours, orders });
                    localStorage.setItem("workData", JSON.stringify(workData));
                    updateUI();
                    workForm.reset();
                });

                window.editEntry = function (index) {
                    const entry = workData[index];
                    document.getElementById("date").value = entry.date;
                    document.getElementById("hours").value = entry.hours;
                    document.getElementById("orders").value = entry.orders;
                    deleteEntry(index);
                };

                window.deleteEntry = function (index) {
                    workData.splice(index, 1);
                    localStorage.setItem("workData", JSON.stringify(workData));
                    updateUI();
                };

                updateUI();
            });
        </script>
    </head>
    <body></body>
</html>
